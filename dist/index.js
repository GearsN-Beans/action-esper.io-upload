(()=>{"use strict";var e={351:function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=n(r(37));const i=r(278);function issueCommand(e,t,r){const n=new Command(e,t,r);process.stdout.write(n.toString()+o.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const a="::";class Command{constructor(e,t,r){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=r}toString(){let e=a+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(t){t=false}else{e+=","}e+=`${r}=${escapeProperty(n)}`}}}}e+=`${a}${escapeData(this.message)}`;return e}}function escapeData(e){return i.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return i.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},186:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=r(351);const a=r(717);const s=r(278);const u=o(r(37));const c=o(r(17));var l;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(l=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const r=s.toCommandValue(t);process.env[e]=r;const n=process.env["GITHUB_ENV"]||"";if(n){const t="_GitHubActionsFileCommandDelimeter_";const n=`${e}<<${t}${u.EOL}${r}${u.EOL}${t}`;a.issueCommand("ENV",n)}else{i.issueCommand("set-env",{name:e},r)}}t.exportVariable=exportVariable;function setSecret(e){i.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){const t=process.env["GITHUB_PATH"]||"";if(t){a.issueCommand("PATH",e)}else{i.issueCommand("add-path",{},e)}process.env["PATH"]=`${e}${c.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r){throw new Error(`Input required and not supplied: ${e}`)}return r.trim()}t.getInput=getInput;function setOutput(e,t){i.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setCommandEcho(e){i.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=l.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){i.issueCommand("debug",{},e)}t.debug=debug;function error(e){i.issue("error",e instanceof Error?e.toString():e)}t.error=error;function warning(e){i.issue("warning",e instanceof Error?e.toString():e)}t.warning=warning;function info(e){process.stdout.write(e+u.EOL)}t.info=info;function startGroup(e){i.issue("group",e)}t.startGroup=startGroup;function endGroup(){i.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return n(this,void 0,void 0,(function*(){startGroup(e);let r;try{r=yield t()}finally{endGroup()}return r}))}t.group=group;function saveState(e,t){i.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},717:function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=n(r(147));const i=n(r(37));const a=r(278);function issueCommand(e,t){const r=process.env[`GITHUB_${e}`];if(!r){throw new Error(`Unable to find environment variable for file command ${e}`)}if(!o.existsSync(r)){throw new Error(`Missing file at path: ${r}`)}o.appendFileSync(r,`${a.toCommandValue(t)}${i.EOL}`,{encoding:"utf8"})}t.issueCommand=issueCommand},278:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue},144:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var o=Object.getOwnPropertyDescriptor(t,r);if(!o||("get"in o?!t.__esModule:o.writable||o.configurable)){o={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,o)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);o(t,e);return t};var a=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});const s=i(r(186));const u=r(147);const c=r(359);function run(){return a(this,void 0,void 0,(function*(){s.info("Authsignal Upload Version*****");s.debug(`Authsignal Version}`);try{if(process.env.DEBUG_ACTION==="true"){s.debug("DEBUG FLAG DETECTED, SHORTCUTTING ACTION.");return}const e=s.getInput("enterpriseId");const t=s.getInput("apiKey");const r=s.getInput("endpointName");const n=s.getInput("filePath");const o=`https://${r}-api.esper.cloud/api/enterprise/${e}/application/upload`;s.debug(`Esper.io endpoint ${o}`);s.debug(`Preparing to upload @ ${n}`);const i=(0,u.createReadStream)(n);const a=new c.FormData;a.append("app_file",i);const l=yield fetch(o,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:a});const f=yield l.json();s.debug(f);s.setOutput("ApplicationId",f.application.id)}catch(e){s.error(e);s.setFailed(e.message)}}))}run()},147:e=>{e.exports=require("fs")},37:e=>{e.exports=require("os")},17:e=>{e.exports=require("path")},359:e=>{var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var o=Object.prototype.hasOwnProperty;var __export=(e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:true})};var __copyProps=(e,i,a,s)=>{if(i&&typeof i==="object"||typeof i==="function"){for(let u of n(i))if(!o.call(e,u)&&u!==a)t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable})}return e};var __toCommonJS=e=>__copyProps(t({},"__esModule",{value:true}),e);var __accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var __privateGet=(e,t,r)=>{__accessCheck(e,t,"read from private field");return r?r.call(e):t.get(e)};var __privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)};var __privateSet=(e,t,r,n)=>{__accessCheck(e,t,"write to private field");n?n.call(e,r):t.set(e,r);return r};var __privateMethod=(e,t,r)=>{__accessCheck(e,t,"access private method");return r};var i={};__export(i,{Blob:()=>f,File:()=>h,FormData:()=>b});e.exports=__toCommonJS(i);var isFunction=e=>typeof e==="function";var isObject=e=>typeof e==="object"&&e!=null&&!Array.isArray(e);var isAsyncIterable=e=>isObject(e)&&isFunction(e[Symbol.asyncIterator]);var a=65536;async function*clonePart(e){if(e.byteLength<=a){yield e;return}let t=0;while(t<e.byteLength){const r=Math.min(e.byteLength-t,a);const n=e.buffer.slice(t,t+r);t+=n.byteLength;yield new Uint8Array(n)}}async function*readStream(e){const t=e.getReader();while(true){const{done:e,value:r}=await t.read();if(e){break}yield r}}async function*chunkStream(e){for await(const t of e){yield*clonePart(t)}}var getStreamIterator=e=>{if(isAsyncIterable(e)){return chunkStream(e)}if(isFunction(e.getReader)){return chunkStream(readStream(e))}throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")};async function*consumeNodeBlob(e){let t=0;while(t!==e.size){const r=e.slice(t,Math.min(e.size,t+a));const n=await r.arrayBuffer();t+=n.byteLength;yield new Uint8Array(n)}}async function*consumeBlobParts(e,t=false){for(const r of e){if(ArrayBuffer.isView(r)){if(t){yield*clonePart(r)}else{yield r}}else if(isFunction(r.stream)){yield*getStreamIterator(r.stream())}else{yield*consumeNodeBlob(r)}}}function*sliceBlob(e,t,r=0,n){n??=t;let o=r<0?Math.max(t+r,0):Math.min(r,t);let i=n<0?Math.max(t+n,0):Math.min(n,t);const a=Math.max(i-o,0);let s=0;for(const t of e){if(s>=a){break}const e=ArrayBuffer.isView(t)?t.byteLength:t.size;if(o&&e<=o){o-=e;i-=e}else{let r;if(ArrayBuffer.isView(t)){r=t.subarray(o,Math.min(e,i));s+=r.byteLength}else{r=t.slice(o,Math.min(e,i));s+=r.size}i-=e;o=0;yield r}}}var s,u,c;var l=class _Blob{constructor(e=[],t={}){__privateAdd(this,s,[]);__privateAdd(this,u,"");__privateAdd(this,c,0);t??={};if(typeof e!=="object"||e===null){throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.")}if(!isFunction(e[Symbol.iterator])){throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.")}if(typeof t!=="object"&&!isFunction(t)){throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.")}const r=new TextEncoder;for(const t of e){let e;if(ArrayBuffer.isView(t)){e=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}else if(t instanceof ArrayBuffer){e=new Uint8Array(t.slice(0))}else if(t instanceof _Blob){e=t}else{e=r.encode(String(t))}__privateSet(this,c,__privateGet(this,c)+(ArrayBuffer.isView(e)?e.byteLength:e.size));__privateGet(this,s).push(e)}const n=t.type===void 0?"":String(t.type);__privateSet(this,u,/^[\x20-\x7E]*$/.test(n)?n:"")}static[Symbol.hasInstance](e){return Boolean(e&&typeof e==="object"&&isFunction(e.constructor)&&(isFunction(e.stream)||isFunction(e.arrayBuffer))&&/^(Blob|File)$/.test(e[Symbol.toStringTag]))}get type(){return __privateGet(this,u)}get size(){return __privateGet(this,c)}slice(e,t,r){return new _Blob(sliceBlob(__privateGet(this,s),this.size,e,t),{type:r})}async text(){const e=new TextDecoder;let t="";for await(const r of consumeBlobParts(__privateGet(this,s))){t+=e.decode(r,{stream:true})}t+=e.decode();return t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of consumeBlobParts(__privateGet(this,s))){e.set(r,t);t+=r.length}return e.buffer}stream(){const e=consumeBlobParts(__privateGet(this,s),true);return new ReadableStream({async pull(t){const{value:r,done:n}=await e.next();if(n){return queueMicrotask((()=>t.close()))}t.enqueue(r)},async cancel(){await e.return()}})}get[Symbol.toStringTag](){return"Blob"}};s=new WeakMap;u=new WeakMap;c=new WeakMap;var f=l;Object.defineProperties(f.prototype,{type:{enumerable:true},size:{enumerable:true},slice:{enumerable:true},stream:{enumerable:true},text:{enumerable:true},arrayBuffer:{enumerable:true}});var isBlob=e=>e instanceof f;var d,p;var h=class extends f{constructor(e,t,r={}){super(e,r);__privateAdd(this,d,void 0);__privateAdd(this,p,0);if(arguments.length<2){throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`)}__privateSet(this,d,String(t));const n=r.lastModified===void 0?Date.now():Number(r.lastModified);if(!Number.isNaN(n)){__privateSet(this,p,n)}}static[Symbol.hasInstance](e){return e instanceof f&&e[Symbol.toStringTag]==="File"&&typeof e.name==="string"}get name(){return __privateGet(this,d)}get webkitRelativePath(){return""}get lastModified(){return __privateGet(this,p)}get[Symbol.toStringTag](){return"File"}};d=new WeakMap;p=new WeakMap;var isFile=e=>e instanceof h;var m,y,g;var b=class{constructor(){__privateAdd(this,y);__privateAdd(this,m,new Map)}static[Symbol.hasInstance](e){if(!e){return false}const t=e;return Boolean(isFunction(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&isFunction(t.append)&&isFunction(t.set)&&isFunction(t.get)&&isFunction(t.getAll)&&isFunction(t.has)&&isFunction(t.delete)&&isFunction(t.entries)&&isFunction(t.values)&&isFunction(t.keys)&&isFunction(t[Symbol.iterator])&&isFunction(t.forEach))}append(e,t,r){__privateMethod(this,y,g).call(this,{name:e,fileName:r,append:true,rawValue:t,argsLength:arguments.length})}set(e,t,r){__privateMethod(this,y,g).call(this,{name:e,fileName:r,append:false,rawValue:t,argsLength:arguments.length})}get(e){const t=__privateGet(this,m).get(String(e));if(!t){return null}return t[0]}getAll(e){const t=__privateGet(this,m).get(String(e));if(!t){return[]}return t.slice()}has(e){return __privateGet(this,m).has(String(e))}delete(e){__privateGet(this,m).delete(String(e))}*keys(){for(const e of __privateGet(this,m).keys()){yield e}}*entries(){for(const e of this.keys()){const t=this.getAll(e);for(const r of t){yield[e,r]}}}*values(){for(const[,e]of this){yield e}}[Symbol.iterator](){return this.entries()}forEach(e,t){for(const[r,n]of this){e.call(t,n,r,this)}}get[Symbol.toStringTag](){return"FormData"}};m=new WeakMap;y=new WeakSet;g=function({name:e,rawValue:t,append:r,fileName:n,argsLength:o}){const i=r?"append":"set";if(o<2){throw new TypeError(`Failed to execute '${i}' on 'FormData': 2 arguments required, but only ${o} present.`)}e=String(e);let a;if(isFile(t)){a=n===void 0?t:new h([t],n,{type:t.type,lastModified:t.lastModified})}else if(isBlob(t)){a=new h([t],n===void 0?"blob":n,{type:t.type})}else if(n){throw new TypeError(`Failed to execute '${i}' on 'FormData': parameter 2 is not of type 'Blob'.`)}else{a=String(t)}const s=__privateGet(this,m).get(e);if(!s){return void __privateGet(this,m).set(e,[a])}if(!r){return void __privateGet(this,m).set(e,[a])}s.push(a)};0&&0;
/*! Based on fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> & David Frank */}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var o=t[r]={exports:{}};var i=true;try{e[r].call(o.exports,o,o.exports,__nccwpck_require__);i=false}finally{if(i)delete t[r]}return o.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(144);module.exports=r})();